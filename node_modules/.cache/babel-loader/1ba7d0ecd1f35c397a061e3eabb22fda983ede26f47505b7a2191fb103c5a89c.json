{"ast":null,"code":"import _slicedToArray from\"/Users/janhvisaini/VSCodeProjects/report-generator/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import axios from'axios';import{saveAs}from'file-saver';import'./App.css';import Papa from'papaparse';import UploadFileIcon from'@mui/icons-material/UploadFile';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _React$useState=React.useState({Bikes:0,Autos:0,Cars:0,Unpaid:0,Cash:0,Digital:0}),_React$useState2=_slicedToArray(_React$useState,2),data=_React$useState2[0],setData=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),col=_React$useState4[0],setCol=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),values=_React$useState6[0],setValues=_React$useState6[1];function handleChange(event){alert('file uploaded!');Papa.parse(event.target.files[0],{header:true,skipEmptyLines:true,complete:function complete(result){var columnArray=[];var valuesArray=[];result.data.map(function(d){columnArray.push(Object.keys(d));valuesArray.push(Object.values(d));});setData(result.data);setCol(columnArray[0]);setValues(valuesArray);}});}React.useEffect(function(){var countBike=0;var countCar=0;var countAuto=0;var countCash=0;var countDigital=0;for(var i=0;i<values.length;i++){for(var j=0;j<values[i].length;j++){if(values[i][j]==='Bike'){col.map(function(val,index){if(val==='Pricing'){countBike+=parseFloat(values[i][index]);}});}else if(values[i][j]==='Car'){col.map(function(val,index){if(val==='Pricing'){countCar+=parseFloat(values[i][index]);}});}else if(values[i][j]==='Auto'){col.map(function(val,index){if(val==='Pricing'){countAuto+=parseFloat(values[i][index]);}});}else if(values[i][j]==='CashPayment'){col.map(function(val,index){if(val==='Total'){countCash+=parseFloat(values[i][index]);}});}else if(values[i][j]==='DigitalPayment'){col.map(function(val,index){if(val==='Total'){countDigital+=parseFloat(values[i][index]);}});}}}var unpaid=parseFloat(countCash+countDigital)-(countBike+countAuto+countCar);setData({Bikes:countBike.toFixed(2),Autos:countAuto.toFixed(2),Cars:countCar.toFixed(2),Unpaid:unpaid.toFixed(2),Cash:countCash.toFixed(2),Digital:countDigital.toFixed(2)});},[col,values]);function handleClick(){axios.post(\"/generate-pdf\",data).then(function(){return axios.get('/fetch-report',{responseType:'blob'});}).then(function(res){var reportBlob=new Blob([res.data],{type:'application/pdf'});saveAs(reportBlob,'report.pdf');});}return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inputDiv\",children:[/*#__PURE__*/_jsxs(\"label\",{id:\"uploadLabel\",htmlFor:\"fileUpload\",children:[/*#__PURE__*/_jsx(UploadFileIcon,{id:\"uploadLabelIcon\"}),\"Upload CSV File\"]}),/*#__PURE__*/_jsx(\"input\",{id:\"fileUpload\",type:\"file\",name:\"file\",accept:\".csv\",onChange:handleChange})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{id:\"generateBtn\",onClick:handleClick,children:\"Generate PDF\"})})]});}export default App;","map":{"version":3,"names":["React","axios","saveAs","Papa","UploadFileIcon","App","useState","Bikes","Autos","Cars","Unpaid","Cash","Digital","data","setData","col","setCol","values","setValues","handleChange","event","alert","parse","target","files","header","skipEmptyLines","complete","result","columnArray","valuesArray","map","d","push","Object","keys","useEffect","countBike","countCar","countAuto","countCash","countDigital","i","length","j","val","index","parseFloat","unpaid","toFixed","handleClick","post","then","get","responseType","res","reportBlob","Blob","type"],"sources":["/Users/janhvisaini/VSCodeProjects/report-generator/client/src/App.js"],"sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport {saveAs} from 'file-saver';\nimport './App.css';\nimport Papa from  'papaparse';\nimport UploadFileIcon from '@mui/icons-material/UploadFile';\n\nfunction App() {\n   const [data,setData]=React.useState({\n    Bikes:0,\n    Autos:0,\n    Cars:0,\n    Unpaid:0,\n    Cash:0,\n    Digital:0\n  });\n   const [col,setCol]=React.useState([]);\n   const [values,setValues]=React.useState([]);\n   \n    function handleChange(event){\n      alert('file uploaded!')\n      Papa.parse(event.target.files[0],{\n        header:true,\n        skipEmptyLines:true,\n        complete:function(result){\n          const columnArray=[];\n          const valuesArray=[];\n          result.data.map((d)=>{\n            columnArray.push(Object.keys(d));\n            valuesArray.push(Object.values(d));\n          });\n          setData(result.data);\n          setCol(columnArray[0]);\n          setValues(valuesArray);\n        }\n      })\n    }\n    React.useEffect(()=>{\n      var countBike=0;\n      var countCar=0;\n      var countAuto=0;\n      var countCash=0;\n      var countDigital=0;\n     for(var i=0;i<values.length;i++){\n       for(var j=0;j<values[i].length;j++){\n         if(values[i][j]==='Bike'){\n           col.map((val,index)=>{\n             if(val==='Pricing'){\n              countBike+=parseFloat(values[i][index]);\n             }\n           })\n           \n         }\n         else if(values[i][j]==='Car'){\n          col.map((val,index)=>{\n            if(val==='Pricing'){\n             countCar+=parseFloat(values[i][index]);\n            }\n          })\n         }\n         else if(values[i][j]==='Auto'){\n          col.map((val,index)=>{\n            if(val==='Pricing'){\n             countAuto+=parseFloat(values[i][index]);\n            }\n          })\n         }\n         else if(values[i][j]==='CashPayment'){\n          col.map((val,index)=>{\n            if(val==='Total'){\n             countCash+=parseFloat(values[i][index]);\n            }\n          })\n         }\n         else if(values[i][j]==='DigitalPayment'){\n          col.map((val,index)=>{\n            if(val==='Total'){\n             countDigital+=parseFloat(values[i][index]);\n            }\n          })\n         }\n       }\n     }\n     const unpaid=parseFloat((countCash)+(countDigital))-((countBike)+(countAuto)+(countCar));\n        setData({\n          Bikes:countBike.toFixed(2),\n          Autos:countAuto.toFixed(2),\n          Cars:countCar.toFixed(2),\n          Unpaid:unpaid.toFixed(2),\n          Cash:countCash.toFixed(2),\n          Digital:countDigital.toFixed(2)\n        });\n    },[col,values]);\n    \n    function handleClick(){\n      axios.post(\"/generate-pdf\",data)\n        .then(()=> axios.get('/fetch-report',{responseType:'blob'}))\n        .then((res)=>{\n          const reportBlob=new Blob([res.data],{type:'application/pdf'})\n          saveAs(reportBlob,'report.pdf');\n        })\n      }\n  return (\n    <div className=\"App\">\n    <div className=\"inputDiv\">\n    <label id=\"uploadLabel\" htmlFor=\"fileUpload\"><UploadFileIcon id=\"uploadLabelIcon\"  />Upload CSV File</label>\n     <input id=\"fileUpload\" type=\"file\" name=\"file\" accept=\".csv\" onChange={handleChange}/>\n     </div>\n     <div>\n     <button id=\"generateBtn\" onClick={handleClick}>Generate PDF</button>\n     </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}